FROM python:3.11

COPY . .

COPY requirements.txt . 

ARG ACCESS_KEY
ENV COSMOS_ACCOUNT_KEY=${ACCESS_KEY}

ARG COGNITO_USER_POOL_ID
ENV COGNITO_USER_POOL_ID=${COGNITO_USER_POOL_ID}

ARG COGNITO_CLIENT_ID
ENV COGNITO_CLIENT_ID=${COGNITO_CLIENT_ID}

ARG COGNITO_EMAIL
ENV COGNITO_EMAIL=${COGNITO_EMAIL}

ARG COGNITO_PASSWORD
ENV COGNITO_PASSWORD=${COGNITO_PASSWORD}

RUN pip install -r requirements.txt

EXPOSE 5000

CMD ["waitress-serve", "--port=5000", "app:app"]